Game Focus Manager

Утилита для автоматического управления производительностью игр в Linux (KDE Wayland), когда окно теряет фокус, для обхода глубокого бага в драйвере NVIDIA.

Этот проект — результат долгой и сложной одиссеи по отладке. Это прагматичное решение комплексной проблемы на стыке прошивки материнской платы (ACPI), проприетарного драйвера NVIDIA и графического стека Linux.
Проблема: Высокая фоновая нагрузка GPU в играх

На определённых конфигурациях железа (Intel Z690 + NVIDIA RTX 30) Vulkan-приложения в Linux не переходят в режим низкого энергопотребления, когда окно свёрнуто.

Симптомы:

    При сворачивании игры её основной рендеринг и звук отключаются (это правильно).

    Однако, интерфейс игры (UI) продолжает отрисовываться с избыточно высоким FPS.

    Это создаёт постоянную фоновую нагрузку на GPU в 60-80%, вызывая ненужный нагрев и шум вентиляторов.

    На Windows на том же самом оборудовании этой проблемы нет (фоновая нагрузка 5-15%).

Причина: Фундаментальный баг в прошивке ACPI BIOS материнской платы, который вызывает ошибку при инициализации подсистемы управления питанием в Linux-драйвере NVIDIA.
Решение: Внешний Менеджер Фокуса

Поскольку драйвер исправить нельзя, а стандартные утилиты (Gamescope, MangoHud) не могут обойти этот баг, данное приложение предлагает интеллектуальный внешний "костыль".

Как это работает:

    "Глаз" (kdotool): Фоновый скрипт надёжно отслеживает, какое окно сейчас в фокусе.

    "Мозг" (это приложение): Графический интерфейс позволяет вам управлять списком отслеживаемых игр.

    "Рука" (MangoHud): Когда скрипт обнаруживает, что игра потеряла фокус, он динамически изменяет конфигурационный файл MangoHud, устанавливая низкий лимит FPS (например, 20). Когда игра возвращает фокус, лимит снимается.

Это обеспечивает полностью автоматическое решение проблемы без необходимости нажимать лишние клавиши.
Установка и Настройка

1. Установка зависимостей (для Fedora/Nobara):
code Bash
IGNORE_WHEN_COPYING_START
IGNORE_WHEN_COPYING_END

    
sudo dnf install python3-pyside6 jq kdotool mangohud

  

2. Настройка:

    Склонируйте репозиторий: git clone https://github.com/YourUsername/Game-Focus-Manager.git

    Перейдите в папку проекта: cd Game-Focus-Manager

    Откройте файл games.json и добавьте в список games_to_watch имена процессов ваших игр.

3. Запуск приложения:
code Bash
IGNORE_WHEN_COPYING_START
IGNORE_WHEN_COPYING_END

    
python3 main.py

  

Используйте вкладку "Состояние", чтобы активировать фоновый скрипт.

4. Настройка Steam:

    Для каждой игры из вашего списка games.json установите Параметры запуска в Steam:
    code Code

IGNORE_WHEN_COPYING_START
IGNORE_WHEN_COPYING_END

    
mangohud %command%

  
